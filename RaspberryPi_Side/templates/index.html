<!DOCTYPE html>
<html>
<head>
    <title>VIPER DASHBOARD</title>
    <style>
        body { background: #121212; color: #00ff41; font-family: monospace; text-align: center; }
        .feed { border: 2px solid #333; margin: 20px auto; width: 640px; background: #000; }
        .btn { padding: 12px 24px; background: #1a1a1a; color: #00ff41; border: 1px solid #00ff41; cursor: pointer; }
        .alert { color: #ff3333; font-weight: bold; margin-top: 10px; }
    </style>
</head>
<body>
    <h1>VIPER MISSION CONTROL</h1>
    <div class="feed"><img id="vStream" src="/video_feed" width="100%"></div>
    <div id="msg" class="alert"></div>
    <button class="btn" onclick="snap()">ðŸ“¸ SNAP TO LAPTOP</button>
    <button class="btn" onclick="check('thermal')">THERMAL</button>
    <button class="btn" onclick="check('gas')">GAS</button>
    <canvas id="c" style="display:none;"></canvas>
    <script>
        function snap() {
            const img = document.getElementById('vStream'), canvas = document.getElementById('c');
            canvas.width = 640; canvas.height = 480;
            canvas.getContext('2d').drawImage(img, 0, 0);
            const a = document.createElement('a');
            a.download = `VIPER_Defect_${Date.now()}.jpg`;
            a.href = canvas.toDataURL('image/jpeg'); a.click();
        }
        function check(s) { fetch('/check_sensor/'+s).then(r=>r.json()).then(d=> document.getElementById('msg').innerText = d.message); }
    </script>
</body>
</html>